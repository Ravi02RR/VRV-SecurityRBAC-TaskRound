import{c as h,u as N,a as t,A as b,j as e,U as f,b as m}from"./index-DhXHizDp.js";import{S as w}from"./search-D2MCYyDQ.js";import{T as k}from"./trash-2-C1z-t4TW.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=h("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=h("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]),S=()=>e.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden animate-pulse",children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"h-6 bg-gray-300 rounded w-3/4 mb-3"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-300 rounded w-full"}),e.jsx("div",{className:"h-4 bg-gray-300 rounded w-5/6"}),e.jsx("div",{className:"h-4 bg-gray-300 rounded w-4/5"})]}),e.jsx("div",{className:"flex items-center justify-between mt-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"h-4 w-4 bg-gray-300 rounded-full"}),e.jsx("div",{className:"h-4 bg-gray-300 rounded w-20"})]})})]})}),_=()=>{const u=N(),{userDetail:r,isAuthenticated:g}=t.useContext(b),[i,d]=t.useState([]),[p,l]=t.useState(!0),[n,c]=t.useState(null),[o,v]=t.useState(""),j=async()=>{try{l(!0);const s=await m.get("https://vrv-securityrbac-taskround.onrender.com/api/v1/user/allpost",{withCredentials:!0});Array.isArray(s.data.posts)?d(s.data.posts):c("Failed to fetch posts: Data is not an array"),l(!1)}catch(s){console.error(s),c("Failed to fetch posts"),l(!1)}},y=async s=>{try{await m.delete(`https://vrv-securityrbac-taskround.onrender.com/api/v1/admin/deletepost?postId=${s}`,{withCredentials:!0}),d(i.filter(a=>a._id!==s))}catch(a){console.error("Failed to delete post",a)}};t.useEffect(()=>{j()},[]);const x=i.filter(s=>s.title.toLowerCase().includes(o.toLowerCase())||s.body.toLowerCase().includes(o.toLowerCase()));return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto mt-10",children:[e.jsxs("header",{className:"mb-12 text-center",children:[e.jsx("h1",{className:"text-4xl font-extrabold text-gray-900 sm:text-5xl md:text-6xl",children:"Latest Posts"}),e.jsx("p",{className:"mt-3 max-w-md mx-auto text-base text-gray-500 sm:text-lg md:mt-5 md:text-xl md:max-w-3xl",children:"Discover inspiring stories and insights from our community"}),e.jsx("div",{className:"mt-8 max-w-md mx-auto",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search posts...",value:o,onChange:s=>v(s.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx(w,{className:"absolute left-3 top-3.5 text-gray-400",size:20})]})})]}),p?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((s,a)=>e.jsx(S,{},a))}):n?e.jsx("div",{className:"text-center py-12",children:e.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[e.jsx("strong",{className:"font-bold",children:"Oops! "}),e.jsx("span",{className:"block sm:inline",children:n})]})}):x.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(A,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsx("p",{className:"text-xl text-gray-500",children:"No posts found"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:x.map(s=>e.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden transition duration-300 transform hover:-translate-y-2 hover:shadow-2xl group",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-3 group-hover:text-blue-600 transition",children:s.title}),e.jsx("p",{className:"text-gray-600 mb-4 line-clamp-3",children:s.body}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[e.jsx(f,{size:16}),e.jsx("span",{className:"text-sm",children:s.user.name||"Anonymous"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:()=>u(`/post/${s._id}`),className:"flex items-center text-blue-600 hover:text-blue-800 transition group",children:["Read More",e.jsx(C,{className:"ml-2 group-hover:translate-x-1 transition",size:16})]}),g&&(r==null?void 0:r.role)==="admin"&&e.jsx("button",{onClick:()=>y(s._id),className:"text-red-500 hover:text-red-700 transition hover:scale-110",title:"Delete Post",children:e.jsx(k,{size:16})})]})]})]})},s._id))})]})})};export{_ as default};
